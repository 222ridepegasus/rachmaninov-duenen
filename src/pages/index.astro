---
import "../styles/global.css";
import Header from "../components/Header.astro";
import PortfolioCard from "../components/PortfolioCard.astro";
import { getCollection } from "astro:content";

const items = await getCollection("portfolio");
---

<html lang="en" class="min-h-full">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Rachmaninov-DÃ¼nen</title>

    <!-- Apply saved theme or OS preference early -->
    <script is:inline>
      (function () {
        try {
          const ls = localStorage.getItem("theme");
          const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
          if (ls === "dark" || (!ls && prefersDark)) {
            document.documentElement.classList.add("dark");
          }
        } catch {}
      })();
    </script>
  </head>

  <body class="bg-white text-gray-900 dark:bg-kk-black dark:text-gray-100 antialiased">
    <!-- Skip link -->
    <a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-[100] focus:rounded-lg focus:bg-gray-900 focus:px-3 focus:py-2 focus:text-white dark:focus:bg-white dark:focus:text-gray-900">
      Skip to content
    </a>

    <Header />

    <!-- Hero -->
    <section class="w-full py-12">
      <div class="mx-auto max-w-[1920px] px-12">
        <h1 class="text-3xl font-bold">Kieran Kelly</h1>
        <p class="text-2xl text-gray-600 dark:text-gray-400">UX/UI Designer</p>
      </div>
    </section>

    <!-- Portfolio grid -->
    <main id="main" class="mx-auto max-w-[1920px] px-12 pb-24">
      <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-12">
        {items.map((item) => (
          <PortfolioCard
            href={`/portfolio/${item.slug}/`}
            title={item.data.title}
            cover={item.data.cover}
            client={item.data.client}
          />
        ))}
      </section>
    </main>
  </body>
</html>